# Курс основ программирования на МКН СПбГУ
## Проект 1: утилита diff

[Постановка задачи](./TASK.md)

### Документация

Утилита diff (сокращение от difference) сравнивает два файла и определяет изменения, которые надо произвести с первым файлом, чтобы из него получить второй.

#### Входные данные

Данная утилита работает в консольном режиме и поддерживает два вида ввода информации: через параметры запуска или через интерактивный режим.

##### Запуск с параметрами

Интерфейс:

    Usage: diff [OPTIONS] FILEFIRST FILESECOND
    
    Options:
    -f, -u, --full, --unified  output format
    -c, --color                colored output
    -h, --help                 Shows help message and exit
    
    Arguments:
    FILEFIRST   path to the first file
    FILESECOND  path to the second file

Опции *-f* и *--full* соотвествуют формату Full, а *-u* и *--unified* - Unified.
Если введено несколько опций *output format*, то приоритет имеет последняя.


Примеры использования:

    $ diff -c a.txt b.txt
    $ diff --color --unified a.txt b.txt

##### Интерактивный режим

Интерфейс:

Интерактивный режим активируется при запуске diff без параметров.
Он последовательно запрашивает у пользователя пути до сравниваемых файлов,
потом предлагает выбрать формат вывода (возможные значения: "full" и "unified")
и цветность (возможные значения: "y" и "n").

Пример использования:

    $ diff
    Enter path to the first file:
    a.txt
    Enter path to the second file:
    b.txt
    Full or unified format? (full/unified)
    unified
    Make colorful lines? (y/n)
    n

#### Вывод

Если входные данные некорректны, то выводится сообщение с указанием на ошибку и программа завершается к кодом возврата 1.

При корректном вводе результат работы утилиты - текствый файл, который выводится в обычный поток вывода.
В самом начале выходного файла находится заголовок с именами сравниваемых файлов и временами их последнего изменения.
Далее есть два поддерживаемых формата:
* Full - выводятся все удалённые, добавленные и неизменнёные строки. Перед добавленными выводится "+", а перед удалёнными - "-".
* Unified - стандартный [unified формат для diff](https://www.gnu.org/software/diffutils/manual/html_node/Unified-Format.html).
Изменения выводятся блоками, а неизменённые части игнорируются. Перед и после каждого блока выводится "контекст" - 3 неизменные строки. 
Также перед каждым блоком выводится информация о нём в стандартном Unified формате.

Поддерживается цветной вывод, который печатает добавленные строки зелёным цветом, а удалённые - красным.